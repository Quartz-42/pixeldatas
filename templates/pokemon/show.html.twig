{% extends 'base.html.twig' %}

{% block content %}
	<div class="bg-red-500 p-4 h-auto">
		<div class="container container-fluid mx-auto">
			<div class="bg-white p-4 my-8 rounded flex w-1/4 justify-center align-middle">
				<div class="w-1/3">
					<img class="w-1/3 ml-8" src="{{ asset('/img/pokeFact.png') }}">
				</div>
				<div class="w-2/3">
					<p class="font-bold italic">Il y a actuellement
						{{ pokemons|length }}
						Pokémons dans la collection !</p>
				</div>
			</div>

			{# barre de recherche #}
			<div class="grid grid-cols-2 gap-4">
				<div class="col-span-1">
					<h3 class="font-semibold text-white">Chercher un pokémon par son nom</h3>
					<input id="search-input-name" type="search" placeholder="Nom du pokémon..." class="rounded w-2/3 p-2 my-4 italic">
					<p id="no-results" class="hidden italic font-bold text-white text-xl">Aucun Pokémon ne correspond à la recherche</p>
				</div>
				<div class="col-span-1 text-right">
					<h3 class="font-semibold text-white">Chercher un pokémon par son type</h3>
					<input id="search-input-type" type="search" placeholder="Type du pokémon..." class="rounded w-2/3 p-2 my-4 italic">
					<p id="no-results2" class="hidden italic font-bold text-white text-xl">Aucun Pokémon ne correspond à la recherche</p>
				</div>
			</div>

			<div id="pokemon-container" class="grid grid-cols-5 gap-4">
				{% for pokemon in pokemons %}
					{% set types = [] %}
					{% for type in pokemon.types %}
						{% set types = types|merge([type.name|lower]) %}
					{% endfor %}

					{% if pokemon.pokedex_id > 0 %}
						<a href="{{path('app_pokemon_details', {"id" : pokemon.pokedex_id})}}" class="pokemon-card bg-white p-4 mt-8 mb-8 rounded-md" data-name="{{ pokemon.name.fr | lower }}" data-type="{{ types|join(' ') }}">
							<div class="flex justify-between">
								<div>
									<h2 class="text-xl font-bold">{{ pokemon.name.fr }}</h2>
								</div>
								<div>
									<p class="font-bold italic">
										Pokédex n°{{ pokemon.pokedex_id }}
									</p>
								</div>
							</div>
							<div class="flex justify-between">
								<div class="mt-2">
									{% if pokemon.types|length == 1 %}
										<p class="text-normal">
											<img class="w-2/3 inline" src="{{ pokemon.types[0].image }}" title="{{ pokemon.types[0].name }}">
										</p>
									{% else %}
										<p class="text-normal">
											{% for image in pokemon.types %}
												<img class="w-2/6 inline" src="{{ image.image }}">
											{% endfor %}
										</p>
									{% endif %}
								</div>
								<div class="mt-2">
									{% if pokemon.sprites.gmax %}
										<span class="font-bold border bg-black border-black rounded text-amber-400 py-1 px-4">GMAX</span>
									{% endif %}
								</div>
							</div>
							<div class="flex justify-center">
								<img src="{{ pokemon.sprites.regular }}" alt="Image de {{ pokemon.name.fr }}" class="w-4/5 mt-[-10px] wiggle">
							</div>
						</a>
					{% endif %}
				{% endfor %}
			</div>
		</div>
	</div>
{% endblock %}
