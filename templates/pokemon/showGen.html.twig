{% extends 'base.html.twig' %}

{% block content %}
	<div class="bg-red-500 p-4 min-h-screen">
		<div class="container mx-auto">
			<div class="bg-white shadow-lg p-6 my-8 rounded-lg w-full md:w-3/5 lg:w-2/5 mx-auto flex items-center">
				<div class="w-1/4 flex justify-center">
					<img class="w-1/2" src="{{ asset('/img/pokeFact.png') }}">
				</div>
				<div class="w-3/4 ml-4 text-lg md:text-base">
					<p class="font-bold text-xl italic text-gray-700">
						La génération
						{{(generation)}}
						comporte
						<span class="text-red-500">{{ pokemons|length -1 }}</span>
						Pokémons !
					</p>
				</div>
			</div>

			<div id="pokemon-list" class="grid gap-6 mt-8 sm:grid-cols-2 lg:grid-cols-5">
				{% for pokemon in pokemons %}
					{% set types = [] %}
					{% for type in pokemon.types %}
						{% set types = types|merge([type.name|lower]) %}
					{% endfor %}

					{% if pokemon.pokedex_id > 0 %}
						<div class="pokemon-card bg-white shadow-md p-4 rounded-lg hover:shadow-lg transition transform hover:scale-105" data-name="{{ pokemon.name.fr | lower }}" data-type="{{ types|join(' ') }}">
							<div class="flex justify-between items-center mb-4">
								<div>
									<h2 class="text-xl font-bold text-gray-800">{{ pokemon.name.fr }}
										{% if pokemon.sprites.gmax %}
											<span class="text-xs font-semibold bg-black text-amber-400 py-1 px-2 rounded ml-2">GMAX</span>
										{% endif %}
									</h2>
								</div>
								<div>
									<p class="text-sm font-bold italic text-gray-500">
										Pokédex n°{{ pokemon.pokedex_id }}
									</p>
								</div>
							</div>
							<div class="flex justify-between items-center mb-4">
								<div>
									{% if pokemon.types|length == 1 %}
										<img class="w-2/3 inline" src="{{ pokemon.types[0].image }}" title="{{ pokemon.types[0].name }}">
									{% else %}
										{% for type in pokemon.types %}
											<img class="w-8 inline-block mr-1" src="{{ type.image }}" title="{{ type.name }}">
										{% endfor %}
									{% endif %}
								</div>
								<a class="font-semibold text-red-500 underline" href="{{ path('app_pokemon_gen', {'generation': pokemon.generation}) }}">
									Gen.
									{{ pokemon.generation }}
								</a>
							</div>
							<div class="flex justify-center">
								<a href="{{ path('app_pokemon_details', {"name": pokemon.name.fr}) }}">
									<img src="{{ pokemon.sprites.regular }}" alt="Image de {{ pokemon.name.fr }}" class="w-4/5 mt-[-10px] transform transition hover:scale-110">
								</a>
							</div>
						</div>
					{% endif %}
				{% endfor %}
			</div>
		</div>
	</div>
{% endblock %}
